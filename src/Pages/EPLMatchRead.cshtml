@page "/EPLMatchRead/{homeTeamId}/{awayTeamId}"
@model ContosoCrafts.WebSite.Pages.EPLMatchReadModel

@{
    ViewData["Title"] = "Match Details";
}

<h2>
    <img src="@Model.Match.Teams?.Home?.Logo" width="50" class="mx-2" />
    @Model.Match.Teams?.Home?.Name vs.
    <img src="@Model.Match.Teams?.Visitors?.Logo" width="50" class="mx-2" />
    @Model.Match.Teams?.Visitors?.Name
</h2>

<div style="width: 60%; margin: 0 auto;">
    <table class="table table-bordered" style="background-color:lightgrey; border-radius:5px; width: 100%;">
        <tbody>
            <tr>
                <td><strong>Status</strong></td>
                <td>@Model.Match.Status?.Long</td>
            </tr>
            <tr>
                <td><strong>Date</strong></td>
                <td>@Model.Match.Date?.DateTime.ToString("yyyy-MM-dd")</td>
            </tr>
            <tr>
                <td><strong>Score</strong></td>
                <td>
                    @if (Model.Match.Scores?.Fulltime?.Home.HasValue == true && Model.Match.Scores?.Fulltime?.Away.HasValue == true)
                    {
                        var scoreDifference = Model.Match.Scores.Fulltime.Home.Value - Model.Match.Scores.Fulltime.Away.Value;
                        @scoreDifference
                    }
                    else
                    {
                        <span>N/A</span>
                    }
                </td>
            </tr>
            <tr>
                <td><strong>Stage</strong></td>
                <td>@Model.Match.Stage</td>
            </tr>
        </tbody>
    </table>
</div>


<h2>Score by Quarter</h2>

@if (Model.Match.Scores?.Fulltime != null)
{


    <div style="display: flex; justify-content: center;">
        <table class="table table-striped" style="width: 60%; background-color:white;">
            <thead>
                <tr style="background-color:#d3d3d3;">
                    <th>Quarter</th>
                    <th>Team</th>
                    <th>Score</th>
                    <th>Total Score</th>
                </tr>
            </thead>
            <tbody>
                @{
                    int homeTotal = 0;
                    int visitorTotal = 0;
                }

                <!-- 1st Quarter -->
                <tr>
                    <td>1st Quarter</td>
                    <td>
                        <img src="@Model.Match.Teams?.Home?.Logo" width="30" class="mx-2" />
                        @Model.Match.Teams?.Home?.Name
                    </td>
                    <td>@Model.Match.Scores?.Fulltime?.Home</td>
                    <td style="text-align: center;">@(homeTotal += Model.Match.Scores?.Fulltime?.Home ?? 0)</td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <img src="@Model.Match.Teams?.Visitors?.Logo" width="30" class="mx-2" />
                        @Model.Match.Teams?.Visitors?.Name
                    </td>
                    <td>@Model.Match.Scores?.Fulltime?.Away</td>
                    <td style="text-align: center;">@(visitorTotal += Model.Match.Scores?.Fulltime?.Away ?? 0)</td>
                </tr>

                <!-- 2nd Quarter -->
                <tr>
                    <td>2nd Quarter</td>
                    <td>
                        <img src="@Model.Match.Teams?.Home?.Logo" width="30" class="mx-2" />
                        @Model.Match.Teams?.Home?.Name
                    </td>
                    <td>@Model.Match.Scores?.Fulltime?.Home</td>
                    <td style="text-align: center;">@(homeTotal += Model.Match.Scores?.Fulltime?.Home ?? 0)</td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <img src="@Model.Match.Teams?.Visitors?.Logo" width="30" class="mx-2" />
                        @Model.Match.Teams?.Visitors?.Name
                    </td>
                    <td>@Model.Match.Scores?.Fulltime?.Away</td>
                    <td style="text-align: center;">@(visitorTotal += Model.Match.Scores?.Fulltime?.Away ?? 0)</td>
                </tr>

                <!-- 3rd Quarter -->
                <tr>
                    <td>3rd Quarter</td>
                    <td>
                        <img src="@Model.Match.Teams?.Home?.Logo" width="30" class="mx-2" />
                        @Model.Match.Teams?.Home?.Name
                    </td>
                    <td>@Model.Match.Scores?.Fulltime?.Home</td>
                    <td style="text-align: center;">@(homeTotal += Model.Match.Scores?.Fulltime?.Home ?? 0)</td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <img src="@Model.Match.Teams?.Visitors?.Logo" width="30" class="mx-2" />
                        @Model.Match.Teams?.Visitors?.Name
                    </td>
                    <td>@Model.Match.Scores?.Fulltime?.Away</td>
                    <td style="text-align: center;">@(visitorTotal += Model.Match.Scores?.Fulltime?.Away ?? 0)</td>
                </tr>

                <!-- 4th Quarter -->
                <tr>
                    <td>4th Quarter</td>
                    <td>
                        <img src="@Model.Match.Teams?.Home?.Logo" width="30" class="mx-2" />
                        @Model.Match.Teams?.Home?.Name
                    </td>
                    <td>@Model.Match.Scores?.Fulltime?.Home</td>
                    <td style="text-align: center;">@(homeTotal += Model.Match.Scores?.Fulltime?.Home ?? 0)</td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                        <img src="@Model.Match.Teams?.Visitors?.Logo" width="30" class="mx-2" />
                        @Model.Match.Teams?.Visitors?.Name
                    </td>
                    <td>@Model.Match.Scores?.Fulltime?.Away</td>
                    <td style="text-align: center;">@(visitorTotal += Model.Match.Scores?.Fulltime?.Away ?? 0)</td>
                </tr>


            </tbody>
        </table>
    </div>
}
else
{
    <p>No quarter scores available.</p>
}

<!-- Back button -->
<a href="/EPLMatches" class="btn btn-primary" style="margin-top: 20px;">Back to Matches</a>
